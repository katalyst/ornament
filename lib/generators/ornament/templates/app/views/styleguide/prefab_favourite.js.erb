var $buttons = $("[data-favourite]");
var _isFavourited = window.isFavourited;

$buttons.each(function(){
  var $button = $(this);
  var buttonText,buttonClass;

  if(_isFavourited) {
    buttonText = $button.attr("data-favourite-text");
    buttonClass = $button.attr("data-favourite-class");
    window.isFavourited = false;
  } else {
    buttonText = $button.attr("data-favourite-active-text");
    buttonClass = $button.attr("data-favourite-active-class");
    window.isFavourited = true;
  }

  $output = $("<a />").attr({
    href: $button.find("a").attr("href"),
    class: buttonClass,
    "data-remote": "true"
  }).text(buttonText);

  $button.html($output);
});
